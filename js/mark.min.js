/*!***************************************************
* mark.js v9.0.0
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):e.Mark=t()})(this,function(){"use strict";function e(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(e){return typeof e}:e=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function t(){return t=Object.assign||function(e){for(var t,s,n=1;n<arguments.length;n++){t=arguments[n];for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},t.apply(this,arguments)}var o=function(){function e(t){var s=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;n(this,e),this.ctx=t,this.iframes=s,this.exclude=o,this.iframesTimeout=i}return s(e,[{key:"getContexts",value:function(){var t,n=[];return typeof this.ctx=="undefined"||!this.ctx?t=[]:NodeList.prototype.isPrototypeOf(this.ctx)?t=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?t=this.ctx:typeof this.ctx=="string"?t=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):t=[this.ctx],t.forEach(function(e){var t=n.filter(function(t){return t.contains(e)}).length>0;n.indexOf(e)===-1&&!t&&n.push(e)}),n}},{key:"getIframeContents",value:function(t,n){var s,o,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};try{if(o=t.contentWindow,s=o.document,!o||!s)throw new Error("iframe inaccessible")}catch{i()}s&&n(s)}},{key:"isIframeBlank",value:function(t){var n="about:blank",s=t.getAttribute("src").trim(),o=t.contentWindow.location.href;return o===n&&s!==n&&s}},{key:"observeIframeLoad",value:function(t,n,s){var o=this,i=!1,a=null,r=function e(){if(i)return;i=!0,clearTimeout(a);try{o.isIframeBlank(t)||(t.removeEventListener("load",e),o.getIframeContents(t,n,s))}catch{s()}};t.addEventListener("load",r),a=setTimeout(r,this.iframesTimeout)}},{key:"onIframeReady",value:function(t,n,s){try{t.contentWindow.document.readyState==="complete"?this.isIframeBlank(t)?this.observeIframeLoad(t,n,s):this.getIframeContents(t,n,s):this.observeIframeLoad(t,n,s)}catch{s()}}},{key:"waitForIframes",value:function(t,n){var o=this,s=0;this.forEachIframe(t,function(){return!0},function(e){s++,o.waitForIframes(e.querySelector("html"),function(){--s||n()})},function(e){e||n()})}},{key:"forEachIframe",value:function(n,s,o){var r=this,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},i=n.querySelectorAll("iframe"),c=i.length,l=0,i=Array.prototype.slice.call(i),a=function(){--c<=0&&d(l)};c||a(),i.forEach(function(t){e.matches(t,r.exclude)?a():r.onIframeReady(t,function(e){s(t)&&(l++,o(e)),a()},a)})}},{key:"createIterator",value:function(t,n,s){return document.createNodeIterator(t,n,s,!1)}},{key:"createInstanceOnIframe",value:function(n){return new e(n.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(t,n,s){var o,i,a=t.compareDocumentPosition(s),r=Node.DOCUMENT_POSITION_PRECEDING;if(a&r)if(n!==null){if(o=n.compareDocumentPosition(s),i=Node.DOCUMENT_POSITION_FOLLOWING,o&i)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(t){var n,s=t.previousNode();return s===null?n=t.nextNode():n=t.nextNode()&&t.nextNode(),{prevNode:s,node:n}}},{key:"checkIframeFilter",value:function(t,n,s,o){var i=!1,a=!1;return o.forEach(function(e,t){e.val===s&&(i=t,a=e.handled)}),this.compareNodeIframe(t,n,s)?(i===!1&&!a?o.push({val:s,handled:!0}):i!==!1&&!a&&(o[i].handled=!0),!0):(i===!1&&o.push({val:s,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(t,n,s,o){var i=this;t.forEach(function(e){e.handled||i.getIframeContents(e.val,function(e){i.createInstanceOnIframe(e).forEachNode(n,s,o)})})}},{key:"iterateThroughNodes",value:function(t,n,s,o,i){for(var a,d,r=this,u=this.createIterator(n,t,o),l=[],c=[],h=function(){var t=r.getIteratorNode(u);return d=t.prevNode,a=t.node,a};h();)this.iframes&&this.forEachIframe(n,function(e){return r.checkIframeFilter(a,d,e,l)},function(e){r.createInstanceOnIframe(e).forEachNode(t,function(e){return c.push(e)},o)}),c.push(a);c.forEach(function(e){s(e)}),this.iframes&&this.handleOpenIframes(l,t,s,o),i()}},{key:"forEachNode",value:function(t,n,s){var o=this,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},a=this.getContexts(),r=a.length;r||i(),a.forEach(function(e){var a=function(){o.iterateThroughNodes(t,e,n,s,function(){--r<=0&&i()})};o.iframes?o.waitForIframes(e,a):a()})}}],[{key:"matches",value:function(t,n){var s,i=typeof n=="string"?[n]:n,o=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return!!o&&(s=!1,i.every(function(e){return!o.call(t,e)||(s=!0,!1)}),s)}}]),e}(),a=function(){function e(s){n(this,e),this.opt=t({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},s)}return s(e,[{key:"create",value:function(t){return this.opt.wildcards!=="disabled"&&(t=this.setupWildcardsRegExp(t)),t=this.escapeStr(t),Object.keys(this.opt.synonyms).length&&(t=this.createSynonymsRegExp(t)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),this.opt.diacritics&&(t=this.createDiacriticsRegExp(t)),t=this.createMergedBlanksRegExp(t),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.createJoinersRegExp(t)),this.opt.wildcards!=="disabled"&&(t=this.createWildcardsRegExp(t)),t=this.createAccuracyRegExp(t),new RegExp(t,"gm".concat(this.opt.caseSensitive?"":"i"))}},{key:"sortByLength",value:function(t){return t.sort(function(e,t){return e.length===t.length?e>t?1:-1:t.length-e.length})}},{key:"escapeStr",value:function(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}},{key:"createSynonymsRegExp",value:function(t){var n,i,s=this,o=this.opt.synonyms,r=this.opt.caseSensitive?"":"i",a=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(i in o)o.hasOwnProperty(i)&&(n=Array.isArray(o[i])?o[i]:[o[i]],n.unshift(i),n=this.sortByLength(n).map(function(e){return s.opt.wildcards!=="disabled"&&(e=s.setupWildcardsRegExp(e)),e=s.escapeStr(e),e}).filter(function(e){return e!==""}),n.length>1&&(t=t.replace(new RegExp("(".concat(n.map(function(e){return s.escapeStr(e)}).join("|"),")"),"gm".concat(r)),a+"(".concat(n.map(function(e){return s.processSynonyms(e)}).join("|"),")")+a)));return t}},{key:"processSynonyms",value:function(t){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),t}},{key:"setupWildcardsRegExp",value:function(t){return t=t.replace(/(?:\\)*\?/g,function(e){return e.charAt(0)==="\\"?"?":""}),t.replace(/(?:\\)*\*/g,function(e){return e.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(t){var n=this.opt.wildcards==="withSpaces";return t.replace(/\u0001/g,n?"[\\S\\s]?":"\\S?").replace(/\u0002/g,n?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(t){return t.replace(/[^(|)\\]/g,function(e,t,n){var s=n.charAt(t+1);return/[(|)\\]/.test(s)||s===""?e:e+"\0"})}},{key:"createJoinersRegExp",value:function(t){var n=[],s=this.opt.ignorePunctuation;return Array.isArray(s)&&s.length&&n.push(this.escapeStr(s.join(""))),this.opt.ignoreJoiners&&n.push("\\u00ad\\u200b\\u200c\\u200d"),n.length?t.split(/\u0000+/).join("[".concat(n.join(""),"]*")):t}},{key:"createDiacriticsRegExp",value:function(t){var s=this.opt.caseSensitive?"":"i",o=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],n=[];return t.split("").forEach(function(e){o.every(function(o){if(o.indexOf(e)!==-1){if(n.indexOf(o)>-1)return!1;t=t.replace(new RegExp("[".concat(o,"]"),"gm".concat(s)),"[".concat(o,"]")),n.push(o)}return!0})}),t}},{key:"createMergedBlanksRegExp",value:function(t){return t.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(t){var o=this,i="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",s=this.opt.accuracy,a=typeof s=="string"?s:s.value,r=typeof s=="string"?[]:s.limiters,n="";switch(r.forEach(function(e){n+="|".concat(o.escapeStr(e))}),a){case"partially":default:return"()(".concat(t,")");case"complementary":return n="\\s"+(n||this.escapeStr(i)),"()([^".concat(n,"]*").concat(t,"[^").concat(n,"]*)");case"exactly":return"(^|\\s".concat(n,")(").concat(t,")(?=$|\\s").concat(n,")")}}}]),e}(),r=function(){function i(e){n(this,i),this.ctx=e,this.ie=!1;var t=window.navigator.userAgent;(t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1)&&(this.ie=!0)}return s(i,[{key:"log",value:function t(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",t=this.opt.log;if(!this.opt.debug)return;e(t)==="object"&&typeof t[s]=="function"&&t[s]("mark.js: ".concat(n))}},{key:"getSeparatedKeywords",value:function(t){var s=this,n=[];return t.forEach(function(e){s.opt.separateWordSearch?e.split(" ").forEach(function(e){e.trim()&&n.indexOf(e)===-1&&n.push(e)}):e.trim()&&n.indexOf(e)===-1&&n.push(e)}),{keywords:n.sort(function(e,t){return t.length-e.length}),length:n.length}}},{key:"isNumeric",value:function(t){return Number(parseFloat(t))==t}},{key:"checkRanges",value:function(t){var n,s,o=this;return!Array.isArray(t)||Object.prototype.toString.call(t[0])!=="[object Object]"?(this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(t),[]):(n=[],s=0,t.sort(function(e,t){return e.start-t.start}).forEach(function(e){var t=o.callNoMatchOnInvalidRanges(e,s),i=t.start,a=t.end,r=t.valid;r&&(e.start=i,e.length=a-i,n.push(e),s=a)}),n)}},{key:"callNoMatchOnInvalidRanges",value:function(t,n){var s,o,i=!1;return t&&typeof t.start!="undefined"?(s=parseInt(t.start,10),o=s+parseInt(t.length,10),this.isNumeric(t.start)&&this.isNumeric(t.length)&&o-n>0&&o-s>0?i=!0:(this.log("Ignoring invalid or overlapping range: "+"".concat(JSON.stringify(t))),this.opt.noMatch(t))):(this.log("Ignoring invalid range: ".concat(JSON.stringify(t))),this.opt.noMatch(t)),{start:s,end:o,valid:i}}},{key:"checkWhitespaceRanges",value:function(t,n,s){var r=!0,i=s.length,c=n-i,o=parseInt(t.start,10)-c,o=o>i?i:o,a=o+parseInt(t.length,10);return a>i&&(a=i,this.log("End range automatically set to the max value of ".concat(i))),o<0||a-o<0||o>i||a>i?(r=!1,this.log("Invalid range: ".concat(JSON.stringify(t))),this.opt.noMatch(t)):s.substring(o,a).replace(/\s+/g,"")===""&&(r=!1,this.log("Skipping whitespace only range: "+JSON.stringify(t)),this.opt.noMatch(t)),{start:o,end:a,valid:r}}},{key:"getTextNodes",value:function(t){var o=this,n="",s=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(e){s.push({start:n.length,end:(n+=e.textContent).length,node:e})},function(e){return o.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){t({value:n,nodes:s})})}},{key:"matchesExclude",value:function(t){return o.matches(t,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(t,n,s){var a=this.opt.element?this.opt.element:"mark",o=t.splitText(n),r=o.splitText(s-n),i=document.createElement(a);return i.setAttribute("data-markjs","true"),this.opt.className&&i.setAttribute("class",this.opt.className),i.textContent=o.textContent,o.parentNode.replaceChild(i,o),r}},{key:"wrapRangeInMappedTextNode",value:function(t,n,s,o,i){var a=this;t.nodes.every(function(e,r){if(l=t.nodes[r+1],typeof l=="undefined"||l.start>n){if(!o(e.node))return!1;var l,d=n-e.start,c=(s>e.end?e.end:s)-e.start,u=t.value.substr(0,e.start),h=t.value.substr(c+e.start);if(e.node=a.wrapRangeInTextNode(e.node,d,c),t.value=u+h,t.nodes.forEach(function(e,n){n>=r&&(t.nodes[n].start>0&&n!==r&&(t.nodes[n].start-=c),t.nodes[n].end-=c)}),s-=c,i(e.node.previousSibling,e.start),s>e.end)n=e.end;else return!1}return!0})}},{key:"wrapGroups",value:function(t,n,s,o){return t=this.wrapRangeInTextNode(t,n,n+s),o(t.previousSibling),t}},{key:"separateGroups",value:function(t,n,s,o,i){for(var r,c=n.length,a=1;a<c;a++)r=t.textContent.indexOf(n[a]),n[a]&&r>-1&&o(n[a],t)&&(t=this.wrapGroups(t,r,n[a].length,i));return t}},{key:"wrapMatches",value:function(t,n,s,o,i){var r=this,a=n===0?0:n+1;this.getTextNodes(function(e){e.nodes.forEach(function(e){for(e=e.node;(n=t.exec(e.textContent))!==null&&n[a]!=="";){if(r.opt.separateGroups)e=r.separateGroups(e,n,a,s,o);else{if(!s(n[a],e))continue;var n,i,c=n.index;if(a!==0)for(i=1;i<a;i++)c+=n[i].length;e=r.wrapGroups(e,c,n[a].length,o)}t.lastIndex=0}}),i()})}},{key:"wrapMatchesAcrossElements",value:function(t,n,s,o,i){var r=this,a=n===0?0:n+1;this.getTextNodes(function(e){for(;(n=t.exec(e.value))!==null&&n[a]!=="";){var n,c,d,l=n.index;if(a!==0)for(c=1;c<a;c++)l+=n[c].length;d=l+n[a].length,r.wrapRangeInMappedTextNode(e,l,d,function(e){return s(n[a],e)},function(e,n){t.lastIndex=n,o(e)})}i()})}},{key:"wrapRangeFromIndex",value:function(t,n,s,o){var i=this;this.getTextNodes(function(e){var a=e.value.length;t.forEach(function(t,o){var r=i.checkWhitespaceRanges(t,a,e.value),c=r.start,l=r.end,d=r.valid;d&&i.wrapRangeInMappedTextNode(e,c,l,function(s){return n(s,t,e.value.substring(c,l),o)},function(e){s(e,t)})}),o()})}},{key:"unwrapMatches",value:function(t){for(var n=t.parentNode,s=document.createDocumentFragment();t.firstChild;)s.appendChild(t.removeChild(t.firstChild));n.replaceChild(s,t),this.ie?this.normalizeTextNode(n):n.normalize()}},{key:"normalizeTextNode",value:function(t){if(!t)return;if(t.nodeType===3)for(;t.nextSibling&&t.nextSibling.nodeType===3;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);else this.normalizeTextNode(t.firstChild);this.normalizeTextNode(t.nextSibling)}},{key:"markRegExp",value:function(t,n){s=this,this.opt=n,this.log('Searching with expression "'.concat(t,'"'));var s,o=0,i="wrapMatches",a=function(t){o++,s.opt.each(t)};this.opt.acrossElements&&(i="wrapMatchesAcrossElements"),this[i](t,this.opt.ignoreGroups,function(e,t){return s.opt.filter(t,e,o)},a,function(){o===0&&s.opt.noMatch(t),s.opt.done(o)})}},{key:"mark",value:function(t,n){s=this,this.opt=n;var s,o=0,r="wrapMatches",c=this.getSeparatedKeywords(typeof t=="string"?[t]:t),i=c.keywords,l=c.length,d=function e(t){var c=new a(s.opt).create(t),n=0;s.log('Searching with expression "'.concat(c,'"')),s[r](c,1,function(e,i){return s.opt.filter(i,t,o,n)},function(e){n++,o++,s.opt.each(e)},function(){n===0&&s.opt.noMatch(t),i[l-1]===t?s.opt.done(o):e(i[i.indexOf(t)+1])})};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),l===0?this.opt.done(o):d(i[0])}},{key:"markRanges",value:function(t,n){s=this,this.opt=n;var s,i=0,o=this.checkRanges(t);o&&o.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(o)),this.wrapRangeFromIndex(o,function(e,t,n,o){return s.opt.filter(e,t,n,o)},function(e,t){i++,s.opt.each(e,t)},function(){s.opt.done(i)})):this.opt.done(i)}},{key:"unmark",value:function(t){var n,s=this;this.opt=t,n=this.opt.element?this.opt.element:"*",n+="[data-markjs]",this.opt.className&&(n+=".".concat(this.opt.className)),this.log('Removal selector "'.concat(n,'"')),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(e){s.unwrapMatches(e)},function(e){var t=o.matches(e,n),i=s.matchesExclude(e);return!t||i?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(n){this._opt=t({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,acrossElements:!1,ignoreGroups:0,each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},n)},get:function(){return this._opt}},{key:"iterator",get:function(){return new o(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),i}();function c(e){var t=this,n=new r(e);return this.mark=function(e,s){return n.mark(e,s),t},this.markRegExp=function(e,s){return n.markRegExp(e,s),t},this.markRanges=function(e,s){return n.markRanges(e,s),t},this.unmark=function(e){return n.unmark(e),t},this}return c})