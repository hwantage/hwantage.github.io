const summaryInclude=60;let fuseOptions={shouldSort:!0,includeMatches:!0,tokenize:!0,matchAllTokens:!0,threshold:2,location:0,distance:100,maxPatternLength:64,minMatchCharLength:2,keys:[{name:"title",weight:.8},{name:"tags",weight:.5},{name:"categories",weight:.5},{name:"contents",weight:.8},{name:"description",weight:.8}]};function getUrlParameter(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");let n=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=n.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}let searchQuery=getUrlParameter("q");searchQuery?(document.getElementById("search-query").value=searchQuery,executeSearch(searchQuery)):document.getElementById("search-results").innerHTML='<p class="no-results">Please enter a word or phrase above</p>';function executeSearch(e){fetch("/index.json").then(function(e){return e.json()}).then(function(t){let s=new Fuse(t,fuseOptions),n=s.search(e);console.log(n),n.length>0?populateResults(n):document.getElementById("search-results").innerHTML='<p class="no-results">No matches found</p>'})}function populateResults(e){e.forEach(function(e,t){if(e.item.type!=="posts")return;let s=e.item.contents,i="",m=[];if(m.push(searchQuery),i.length<1){var o,a,r,h,g=new RegExp(`[^.?!]*(?<=[.?\\s!])${searchQuery}(?=[\\s.?!])[^.?!]*[.?!]`,"i"),u=summaryInclude*2,l=s.toLowerCase().indexOf(searchQuery.toLowerCase()),c=s.indexOf(g.exec(s)),d=!1;c+u<l?(a=l,d=!0):a=c,o=a+u,o>s.length&&(o=s.length),d?(o-=3,i+="…"+s.substring(a,o).trim()):i+=s.substring(a,o).trim()}i+="…",r=document.createElement("textarea"),r.innerHTML=i,h=r.value;let n=document.getElementById("search-result-template").content.cloneNode(!0);n.querySelector(".search_summary").setAttribute("id","summary-"+t),n.querySelector(".search_link").setAttribute("href",e.item.permalink),n.querySelector(".search_title").textContent=e.item.title,n.querySelector(".search_snippet").textContent=h;let f=e.item.tags;f?n.querySelector(".search_tags").textContent=f:n.querySelector(".search_iftags").remove();let p=e.item.categories;p?n.querySelector(".search_categories").textContent=p:n.querySelector(".search_ifcategories").remove(),m.forEach(function(e){let s=new Mark(n);s.mark(e)}),document.getElementById("search-results").appendChild(n)})}